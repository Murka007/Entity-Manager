!function(){"use strict";var t=document.getElementById("game-canvas"),i=t.getContext("2d"),e=["#f54242","#f5e042","#fffce8","#8d3ab0","#42eb50","#425eeb","#42ebb8","#ff61d7"],n=function(t,i){return Math.floor(Math.random()*(i-t+1)+t)},o=function(t,i,e){return e*(i-t)+t},s=function(t,i,e){return Math.min(Math.max(t,i),e)},r=function(){function t(t,i){this.x=t,this.y=i}return t.random2D=function(i,e){return void 0===e&&(e=1),new t(e*Math.cos(i),e*Math.sin(i))},t.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this},t.prototype.mult=function(t){return this.x*=t,this.y*=t,this},t.prototype.div=function(t){return this.x/=t,this.y/=t,this},Object.defineProperty(t.prototype,"magnitude",{get:function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))},enumerable:!1,configurable:!0}),t.prototype.normalize=function(){var t=this.magnitude;return t>0&&this.div(t),this},t.prototype.setMag=function(t){return this.normalize().mult(t)},t.prototype.setXY=function(t,i){return this.x=t,this.y=i,this},t}(),h=r,d=window.devicePixelRatio,a=window.innerWidth/2*d,u=window.innerHeight/2*d,c={x2:a,y2:u,x:a,y:u,pressed:!1},p=function(t){var i=window.devicePixelRatio,e=t instanceof TouchEvent?t.changedTouches[0]:t,n=e.clientX,o=e.clientY;c.x2=n*i,c.y2=o*i};window.addEventListener("mousemove",p),window.addEventListener("touchmove",p);var l=function(t){c.pressed="mousedown"===t.type||"touchstart"===t.type,p(t)};window.addEventListener("mousedown",l),window.addEventListener("mouseup",l),window.addEventListener("touchstart",l),window.addEventListener("touchend",l);var f=c,w=function(){function e(t,i,e,o){this.id=-1,this.radius=e,this.color=o,this.acceleration=new h(0,0),this.velocity=h.random2D(Math.random()*Math.PI*2).setMag(n(0,f.pressed?10:2)),this.position=new h(t,i),this.lifetime=175}return e.prototype.needsRemove=function(){return this.lifetime<1},e.prototype.clampPosition=function(){var i=this.position,e=this.radius;i.x=s(i.x,e,t.width-e),i.y=s(i.y,e,t.height-e)},e.prototype.resolveBounds=function(){var i=this.position,e=this.radius;(i.x<e||i.x>t.width-e)&&(this.velocity.x*=-1),(i.y<e||i.y>t.height-e)&&(this.velocity.y*=-1),this.clampPosition()},e.prototype.update=function(){this.resolveBounds(),this.velocity.add(this.acceleration),this.position.add(this.velocity),this.acceleration.setXY(0,0),this.lifetime-=5},e.prototype.draw=function(){i.beginPath(),i.globalAlpha=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];var e=t[0],n=t[1],o=t[2],s=t[3],r=t[4];return(e-n)/(o-n)*(r-s)+s}(this.lifetime,0,255,0,1),i.fillStyle=this.color,i.arc(this.position.x,this.position.y,this.radius,0,2*Math.PI),i.fill(),i.closePath()},e}(),v=w,y=function(){function t(){this.id=0,this.entities=[],this.link=new Map,this.unused=[]}return t.prototype.add=function(t){if(-1!==t.id)throw new Error("This entity already exist, entity `id` must equal to `-1`");var i=this.unused.length?this.unused.pop():this.id++;t.id=i;var e=this.entities.length;this.entities.push(t),this.link.set(i,e)},t.prototype.remove=function(t){if(-1===t.id)throw new Error("This entity doesn't exist");var i=this.link.get(t.id),e=this.entities.length-1;if(i!==e){var n=this.entities[e];this.entities[e]=t,this.entities[i]=n,this.link.set(n.id,i)}this.entities.pop(),this.link.delete(t.id),this.unused.push(t.id),t.id=-1},t.prototype.removeById=function(t){var i=this.link.get(t),e=this.entities[i];this.remove(e)},t}(),m=function(){var i=window.devicePixelRatio;t.width=window.innerWidth*i,t.height=window.innerHeight*i};window.addEventListener("resize",m);var x=m;window.addEventListener("contextmenu",(function(t){return t.preventDefault()})),x();var g=new y;!function s(){window.requestAnimationFrame(s),i.clearRect(0,0,t.width,t.height),f.x=o(f.x,f.x2,.09),f.y=o(f.y,f.y2,.09);for(var r=0;r<20;r++)g.add(new v(f.x,f.y,n(8,f.pressed?30:20),e[n(0,e.length-1)]));for(r=0;r<g.entities.length;r++){var h=g.entities[r];h.update(),h.needsRemove()?g.remove(h):h.draw()}}()}();